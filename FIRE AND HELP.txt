INITDS MACRO
MOV AX,@DATA
MOV DS,AX
ENDM

INIT8255 MACRO
MOV AL,CW
MOV DX,CR
OUT DX,AL
ENDM

OUTPB MACRO
MOV DX,PB
OUT DX,AL
ENDM

OUTPC MACRO
MOV DX,PC
OUT DX,AL
ENDM

.MODEL SMALL
.STACK
.DATA
PB EQU 0DC51H
PC EQU 0DC52H
CR EQU 0DC53H
CW DB 80H
M1 DB 10,13,"PRESS ANY KEY TO EXIT$"
MSG1 DB 86H,0AFH,0CFH,8EH
MSG2 DB 8CH,0C7H,86H,89H
.CODE
INITDS
INIT8255
LEA DX,MI
MOV AH,9
INT 21H
START:LEA SI,MSG1
CALL DISP_MSG
CALL DELAY
LEA SI,MSG2
CALL DISP_MSG
CALL DELAY
MOV AH,1
INT 16H
JZ START
MOV AH,4CH
INT 21H

DISP_MSG PROC
MOV CX,4
NEXT_CHAR:MOV BL,8
MOV AL,[SI]
NEXTBIT:ROL AL,1
OUTPB
PUSH AX
MOV AL,00H
OUTPC
MOV AL,11H
OUTPC
POP AX
DEC BL
JNZ NEXTBIT
INC SI
LOOP NEXT_CHAR
RET
DISP_MSG ENDP

DELAY PROC
MOV BX,0FFFH
B2:MOV VX,0FFFFH
B1:LOOP B1
DEC BX
JNZ B2
RET
DELAY ENDP
END